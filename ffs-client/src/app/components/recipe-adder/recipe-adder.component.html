<mat-card>
  <h1> Add Recipe </h1>
  <form class="recipe-form" (ngSubmit)="submitRecipe()" #recipeForm="ngForm">
    <mat-form-field class="recipe-full-width">
      <input matInput placeholder="Name" [(ngModel)]="recipe.name" name="name">
    </mat-form-field>
      <mat-form-field class="recipe-full-width">
        <input matInput placeholder="Cuisine" [(ngModel)]="recipe.cuisine.name" name="cuisine">
      </mat-form-field>
    <mat-form-field class="recipe-full-width">
      <textarea matInput placeholder="Description" rows="4" cols="50"
                [(ngModel)]="recipe.description" name="description"></textarea>
    </mat-form-field>

    <app-ingredients-viewer [(ingredients)]="recipe.ingredients" [canEdit]="true"></app-ingredients-viewer>

    <form class="ingredient-form" (ngSubmit)="addIngredient()" #ingredientForm="ngForm">
      <div>
        <mat-form-field>
          <input matInput placeholder="Ingredient" [(ngModel)]="newIngredient.food.name" name="ingredient">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Quantity" [(ngModel)]="newIngredient.quantity" name="quantity">
        </mat-form-field>
        <mat-form-field>
          <mat-select placeholder="Units" [(ngModel)]="newIngredient.unit" name="unit">
            <mat-option *ngFor="let unit of units" [value]="unit">{{unit.name}}</mat-option>
          </mat-select>
        </mat-form-field>

        <button type="submit" mat-raised-button color="accent">Add Ingredient</button>
      </div>
    </form>

    <table class="table">
      <tr>
        <th>#</th>
        <th>Step</th>
      </tr>
      <tr *ngFor="let step of recipe.steps; let i=index">
        <td>
          {{i+1}}
        </td>
        <td>
          {{step.step}}
        </td>
      </tr>
    </table>

    <form class="step-form" (ngSubmit)="addStep()" #stepForm="ngForm">
      <div>
        <mat-form-field>
          <textarea matInput placeholder="Step" rows="4" cols="50"
                    [(ngModel)]="newStep.step" name="step"></textarea>
        </mat-form-field>
        <button type="submit" mat-raised-button color="accent">Add Step</button>
      </div>
    </form>

    <button type="button" mat-raised-button color="accent" (click)="goBack()">Cancel</button>
    <button type="submit" mat-raised-button color="primary">Submit</button>
  </form>
</mat-card>
