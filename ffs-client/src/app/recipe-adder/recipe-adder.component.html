<mat-card>

</mat-card>

<mat-card>
  <h1> Add Recipe </h1>
  <form class="recipe-form" (ngSubmit)="submitRecipe()" #recipeForm="ngForm">
    <mat-form-field class="recipe-full-width">
      <input matInput placeholder="Name" [(ngModel)]="recipe.name" name="name">
    </mat-form-field>
      <mat-form-field class="recipe-full-width">
        <input matInput placeholder="Cuisine" [(ngModel)]="recipe.cuisine.name" name="cuisine">
      </mat-form-field>
    <mat-form-field class="recipe-full-width">
      <textarea matInput placeholder="Description" rows="4" cols="50"
                [(ngModel)]="recipe.description" name="description"></textarea>
    </mat-form-field>
    <div *ngIf="recipe.ingredients.length > 0">
      <mat-table #table [dataSource]="dataSource">
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
          <mat-cell *matCellDef="let ingredient"> {{ingredient.food.name}} </mat-cell>
        </ng-container>

        <!-- Quantity Column -->
        <ng-container matColumnDef="quantity">
          <mat-header-cell *matHeaderCellDef> Quantity </mat-header-cell>
          <mat-cell *matCellDef="let ingredient"> {{ingredient.quantity}} </mat-cell>
        </ng-container>

        <!-- Units Column -->
        <ng-container matColumnDef="unit">
          <mat-header-cell *matHeaderCellDef> Unit </mat-header-cell>
          <mat-cell *matCellDef="let ingredient"> {{ingredient.unit.name}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
          <mat-header-cell *matHeaderCellDef></mat-header-cell>
          <mat-cell *matCellDef="let i=index;">
            <button mat-icon-button color="accent" (click)="removeIngredient(i)">
              <mat-icon aria-label="Delete">delete</mat-icon>
            </button>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>
    </div>

    <form class="ingredient-form" (ngSubmit)="addIngredient()" #ingredientForm="ngForm">
      <div>
        <mat-form-field>
          <input matInput placeholder="Ingredient" [(ngModel)]="newIngredient.food.name" name="ingredient">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Quantity" [(ngModel)]="newIngredient.quantity" name="quantity">
        </mat-form-field>
        <mat-form-field>
          <mat-select placeholder="Units" [(ngModel)]="newIngredient.unit" name="unit">
            <mat-option *ngFor="let unit of units" [value]="unit">{{unit.name}}</mat-option>
          </mat-select>
        </mat-form-field>

        <button type="submit" mat-raised-button color="accent">Add Ingredient</button>
      </div>
    </form>

    <table class="table">
      <tr>
        <th>#</th>
        <th>Step</th>
      </tr>
      <tr *ngFor="let step of recipe.steps; let i=index">
        <td>
          {{i+1}}
        </td>
        <td>
          {{step.step}}
        </td>
      </tr>
    </table>

    <form class="step-form" (ngSubmit)="addStep()" #stepForm="ngForm">
      <div>
        <mat-form-field>
          <textarea matInput placeholder="Step" rows="4" cols="50"
                    [(ngModel)]="newStep.step" name="step"></textarea>
        </mat-form-field>
        <button type="submit" mat-raised-button color="accent">Add Step</button>
      </div>
    </form>

    <button type="button" mat-raised-button color="accent" routerLink="/recipes">Cancel</button>
    <button type="submit" mat-raised-button color="primary">Submit</button>
  </form>
</mat-card>
